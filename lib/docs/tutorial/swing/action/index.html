<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
    <head>
        <title>SoftSmithy Utility Library Tutorial - The Extended Action Framework</title>
    </head>
    <body>
        <h1>The Extended Action Framework</h1>
        <em>The Extended Action Framework</em> extends the Action framework provided 
        by Swing. It mainly provides convenience methods and fields.
        <ul>
            <li><a href="#xAction">The XAction Interface</a></li>
            <li><a href="#reflective">Reflective Actions</a></li>
            <li><a href="#utility">The XActions Utility Class</a></li>
            <li><a href="#factories">The Standard Action Factories</a></li>
        </ul>
        <h2><a name="xAction">The XAction Interface</a></h2>
        The <a href="http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/Action.html">
        Action</a> interface provided by Swing defines some static final fields,
        which can be used as keys for its getValue and putValue methods. 
        Unfortunalty this interface has some shortcomings: <br/>
        <ul>
            <li>
                Although you can set all values used by AbstractButton's and JMenuItem's 
                configurePropertiesFromAction method by using the putValue method, 
                you have first to figure out, of which type the values have to be, since
                the putValue method just takes an Object. 
            </li>
            <li>
                It only defines a key for a small icon. Large icons as well as small 
                and large disabled, pressed, rollover, rollover selected and selected
                icons aren't supported.
            </li>
        </ul>
        <br/>
        The <a href="../../../api/org/softsmithy/lib/swing/action/XAction.html">
        XAction</a> interface overcomes these shortcomings by defining static 
        final fields for all these icons and providing setter and getter methods
        with the right type for each field it defines.<br/>
        <b>Note</b>: The getter method might throw a ClassCastException if the putValue
        method has been called directly with a wrong type. The safest way is to
        use the convenience methods to set the values.
        <br/><br/>
        This extended Action interface builds the base of the rest of the
        <em>Extended Action Framework</em> and since it extends the Action
        interface, it can be used everywhere an ordinary Action can be used!
        <br/>
       
        The <a href="../../../api/org/softsmithy/lib/swing/action/AbstractXAction.html">
        AbstractXAction</a> class implements the XAction interface by extending 
        the AbstractAction and implementing all new methods of XAction. The
        actionPerfomed method remains abstract.
        
        <blockquote><pre>
        XAction saveAction = new AbstractXAction() {
            public void actionPerformed(ActionEvent e) {
                // save things
            }
        };
        
        saveAction.setName("Save");
        saveAction.setSmallIcon(new ImageIcon(getClass().getResource("/toolbarButtonGraphics/general/Save16.gif")));
        saveAction.setLargeIcon(new ImageIcon(getClass().getResource("/toolbarButtonGraphics/general/Save24.gif")));
        saveAction.setShortDescription("Save");
        saveAction.setAccelerator(KeyStroke.getKeyStroke("control S"));
        saveAction.setMnemonicKey('S');
        </pre></blockquote>
        <h2><a name="reflective">Reflective Actions</a></h2>
        <a href="../../../api/org/softsmithy/lib/swing/action/ReflectiveXAction.html">ReflectiveXAction</a>
        is a trampoline class that implements the <a href="../../../api/org/softsmithy/lib/swing/action/XAction.html">
        XAction</a> interface and delegates the actionPerformed method to a reflectivly called action method. That method must
        be public and take an ActionEvent object as its single parameter.<br>
        <p>
 
            Normally there are two standard ways to implement the ActionListener interface:
            The first is to let a class implement the ActionListener interface and then add an
            object of this class to the addActionListener methods of the components
            firing ActionEvents. You then have to check the source in the
            actionPerformed method. You end up with a big ugly, unmaintainable and
            unstable if-then-else- statement. The second approach is to define a class for
            every such component. You end up with tons of small classes all
            increasing the memory footprint (typically 3K per class). 
        </p>
        <p>
            Now this approach using reflection lets you define a method for each such component avoiding the
            mentioned drawbacks and has the following advantages:
            <ul>
                <li>No other classes implementing ActionListener are used.</li>
                <li>The code is very clear.</li>
            </ul> 
            The new drawbacks are however:
            <ul>
                <li>Reflectivly calling method does not identify typos during
                compile-time.</li>
                <li> Calling a method refectivly is slower (but it's unlikely the user
                notices it).</li>
            </ul>
            More to read about reflective actions and trampolines: <a
            href="http://java.sun.com/docs/books/performance/1st_edition/html/JPClassLoading.fm.html#11197">
            Chapter 6.2.3, p. 73</a> of the Java Series Book <a
            href="http://java.sun.com/docs/books/performance/"> Java Platform Performance
            Strategies and Tactics</a> by Steve Wilson and Jeff Kesselman.<br>
        </p> 
        <p>
            Although there are no compile time errors if the specified method doesn't
            exist, you don't have to wait for the method to be called to get
            an Exception. The constructor will already throw a NoSuchMethodException in 
            that case. 
        </p>
        
        <blockquote><pre>
        try {
            Action myAction = new ReflectiveXAction(this, "myActionMethod");
        } catch (NoSuchMethodException ex) {
            ex.printStackTrace();
        }
        ...
        
        
        public void myActionMethod(ActionEvent e){
            // do something
        }
        
        </pre></blockquote>
        Reflective actions are heavily used and supported throughout the whole 
        <em>Extended Action Framework</em>.
        <h2><a name="utility">The XActions Utility Class</a></h2>
        The <a href="../../../api/org/softsmithy/lib/swing/action/XActions.html">XActions</a> 
        class is a utility class providing convenience methods, which are described in this section.
        <blockquote><pre>
        public static void configureButton(AbstractButton button, XAction action, IconType iconType, boolean showText, boolean coolStyle)
        </pre></blockquote>
        The <a href="../../../api/org/softsmithy/lib/swing/action/XActions.html#configureButton(javax.swing.AbstractButton,%20org.softsmithy.lib.swing.action.XAction,%20org.softsmithy.lib.swing.action.IconType,%20boolean,%20boolean)">
        configureButton</a> method configures an <a href="http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/AbstractButton.html">
        AbstractButton</a> with an 
        <a href="../../../api/org/softsmithy/lib/swing/action/XAction.html">
        XAction</a>.
        It can be specified, which icon type should be use (small icons, 
        large icons or no icons), if the text should be displayed and if the 
        buttons should have a cool style. If cool style is set to true, then the
        border of the button will be drawn only if the mouse pointer is over the
        button. Note: Since Java 1.4 you can create a similar effect by setting 
        the rollover property of the toolbar to true. However look and feels may
        ignore this property and the Java Look and Feel does so.
        <blockquote><pre>
   private void addMenuItems(XAction[] xActions ) {
        for (int i=0; i < xActions.length; i++){
            JMenuItem item = new JMenuItem();
            XActions.configureButton(item, xActions[i], IconType.SMALL_ICON, true, false);
            menu.add(item);
        }
    }
    
    private void addToolbarStandardButtons(XAction[] xActions ) {
        for (int i=0; i < xActions.length; i++){
            JButton button = new JButton();
            XActions.configureButton(button, xActions[i], IconType.LARGE_ICON, false, false);
            toolBarStandard.add(button);
        }
    }
    
    private void addToolbarCoolButtons(XAction[] xActions ) {
        for (int i=0; i < xActions.length; i++){
            JButton button = new JButton();
            XActions.configureButton(button, xActions[i], IconType.LARGE_ICON, false, true);
            toolBarCool.add(button);
        }
    }
         </pre></blockquote>
        Note:
        <p><center>
       <img src="ConfigureButtonsSample.jpg" width="500" height="300" alt="Configure Buttons Sample"/>
        </center></p>
        <br/>
        <blockquote>
            <hr/>
            <hr/>
        </blockquote>
        
        Like this you can first specify all information in one XAction object and then
        specify which data should be displayed using this same XAction object.
        
        <h2><a name="factories">The Standard Action Factories</a></h2>
        <a href="http://java.sun.com/developer/techDocs/hi/repository/index.html">x</a><br/>
        <a href="http://java.sun.com/products/jlf/ed2/guidelines.html">x</a><br/>
        <a href="http://java.sun.com/products/jlf/ed2/book/Appendix.A.html">x</a><br/>
        <a href="http://java.sun.com/products/jlf/ed2/book/Appendix.A2.html">x</a><br/>
        <a href="http://java.sun.com/products/jlf/ed2/book/Appendix.C.html">x</a><br/>
        <a href="../../../api/org/softsmithy/lib/swing/action/StandardActionFactory.html">StandardActionFactory</a><br/>
        <a href="../../../api/org/softsmithy/lib/swing/action/DevelopmentActionFactory.html">DevelopmentActionFactory</a><br/>
        <a href="http://java.sun.com/developer/techDocs/hi/repository/TBG_Development.html">x</a><br/>        
        <a href="../../../api/org/softsmithy/lib/swing/action/GeneralActionFactory.html">GeneralActionFactory</a><br/>
        <a href="http://java.sun.com/developer/techDocs/hi/repository/TBG_General.html">x</a><br/>
      
        <a href="../../../api/org/softsmithy/lib/swing/action/MediaActionFactory.html">MediaActionFactory</a><br/>
        <a href="http://java.sun.com/developer/techDocs/hi/repository/TBG_Media.html">x</a><br/>

        <a href="../../../api/org/softsmithy/lib/swing/action/NavigationActionFactory.html">NavigationActionFactory</a><br/>
        <a href="http://java.sun.com/developer/techDocs/hi/repository/TBG_Navigation.html">x</a><br/> 

        <a href="../../../api/org/softsmithy/lib/swing/action/TableActionFactory.html">TableActionFactory</a><br/>
        <a href="http://java.sun.com/developer/techDocs/hi/repository/TBG_Table.html">x</a><br/>        

        <a href="../../../api/org/softsmithy/lib/swing/action/TextActionFactory.html">TextActionFactory</a><br/>
        <a href="http://java.sun.com/developer/techDocs/hi/repository/TBG_Text.html">x</a><br/>
    </body>
</html>
